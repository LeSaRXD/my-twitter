{% extends 'base.html' %}

{% block styles %}/static/css/feed.css{% endblock %}

{% block content %}
<div id="content">
	<div class="post">
		<div class="post_header">
			<a href="/user/{{ post.username }}/" class="handle">@{{ post.username }}</a>
			<span class="post_info_container">{{ post.time }}</span>
		</div>
		<div class="post_body">
			{% if post.deleted %}
			Post has been deleted
			{% else %}
			<pre>{{ post.body }}</pre>
			{% endif %}
		</div>
		<div class="post_footer">
			<pre><b>{{ post.likes }}</b> likes</pre>
			<span class="post_info_container">
				{% if post.username == userdata.username and not post.deleted %}
				<a href="/delete_post/{{ post.id }}">delete</a>
				{% endif %}
				<a class="semitransparent" href="/post/{{ post.id }}">{{ post.id }}</a>
			</span>
		</div>
	</div>

	{% if userdata.username %}
	
	<hr>
	<form id="create_post_container" method="post" action="/create_post">
		<input type="hidden" name="parent_id" value="{{ post.id }}">
		<h2>Type your reply</h2>
		<textarea id="create_post_input" rows="8" name="body" placeholder="Write something" required></textarea>
		<button id="create_post_button" type="submit">Reply</button>
	</form>
	
	{% endif %}

	{% for reply in replies %}

	<hr>
	<div class="post">
		<div class="post_header">
			<a href="/user/{{ post.username }}/" class="handle">@{{ reply.username }}</a>
			<span class="post_info_container">{{ reply.time }}</span>
		</div>
		<div class="post_body">
			{% if reply.deleted %}
			Reply has been deleted
			{% else %}
			<pre>{{ reply.body }}</pre>
			{% endif %}
		</div>
		<div class="post_footer">
			<pre><b>{{ reply.likes }}</b> likes</pre>
			<span class="post_info_container">
				{% if reply.username == userdata.username and not reply.deleted %}
				<a href="/delete_post/{{ reply.id }}">delete</a>
				{% endif %}
				<a class="semitransparent" href="/post/{{ reply.id }}">{{ reply.id }}</a>
			</span>
		</div>
	</div>

	{% endfor %}
	
</div>
{% endblock %}