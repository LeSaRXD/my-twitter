{% extends 'base.html' %}

{% block title %}Homepage{% endblock %}

{% block styles %}/static/css/feed.css{% endblock %}



{% block content %}

{% if userdata.username %}

<form id="create_post_container" method="post" action="/create_post">
	<h2>Create a post</h2>
	<textarea id="create_post_input" rows="8" name="body" placeholder="Write something" required></textarea>
	<button id="create_post_button" type="submit">Post!</button>
</form>

{% endif %}

<hr>

<div id="content">

	{% for post in posts %}
	<div class="post">
		<div class="post_header">
			<a href="/user/{{ post.username }}/" class="handle">@{{ post.username }}</a>
			<span class="post_info_container">{{ post.time }}</span>
		</div>
		<div class="post_body">
			{% if post.deleted %}
			Post has been deleted
			{% else %}
			<pre>{{ post.body }}</pre>
			{% endif %}
		</div>
		<div class="post_footer">
			<pre><b>{{ post.likes }}</b> likes</pre>
			<span class="post_info_container">
				{% if post.username == userdata.username and not post.deleted %}
				<a href="/delete_post/{{ post.id }}">delete</a>
				{% endif %}
				<a class="semitransparent" href="/post/{{ post.id }}">{{ post.id }}</a>
			</span>
		</div>
	</div>
	<hr>
	{% endfor %}

</div>

{% endblock %}