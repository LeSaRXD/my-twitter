{% extends 'base.html' %}

{% block title %}Homepage{% endblock %}

{% block styles %}
<style>

#content{
	width: 100%;

	display: flex;
	flex-direction: column;
	gap: 0.5rem;
}

#create_post_container{
	display: flex;
	flex-direction: column;
	align-items: start;
	justify-content: start;
	gap: 0.5rem;

	padding: 1rem;
}
#create_post_input{
	align-self: stretch;
}
#create_post_button{
	margin: 0;
	padding: 0.5rem;

	background: var(--accent-color);
	color: #fff;
	
	border: none;
	border-radius: 1rem;
	
	font-size: 1.2rem;
}

.post{
	display: flex;
	flex-direction: column;
	align-items: stretch;

	padding: 8px;

	border: 1px solid #fff;
	border-radius: 10px;

	background: inherit;
}
.post_header{
	display: flex;
	flex-direction: row;
	align-items: stretch;
}
.post_body{
	margin: 5px 0px;
	padding: 5px;
	border-radius: 7px;
	
	background: #111;
}
.post_footer{
	display: flex;
	flex-direction: row;
	align-items: stretch;
}
.post_info_container{
	color: rgba(255, 255, 255, 0.7);
	margin-left: auto;
}

</style>
{% endblock %}



{% block content %}

<div id="content">
	{% if userdata.username %}

	<form id="create_post_container" method="post" action="/create_post">
		<h2>Create a post</h2>
		<textarea id="create_post_input" rows="8" name="body" placeholder="Write something" required></textarea>
		<button id="create_post_button" type="submit">Post!</button>
	</form>

	{% endif %}

	<hr>

	{% for post in posts %}
	<div class="post">
		<div class="post_header">
			<a href="/user/{{ post.username }}/" class="handle">@{{ post.username }}</a>
			<span class="post_info_container">{{ post.time }}</span>
		</div>
		<div class="post_body">
			{% if post.deleted %}
			Post has been deleted
			{% else %}
			<pre>{{ post.body }}</pre>
			{% endif %}
		</div>
		<div class="post_footer">
			<pre><b>{{ post.likes }}</b> likes</pre>
			<span class="post_info_container">
				{% if post.username == userdata.username and not post.deleted %}
				<a href="/delete_post/{{ post.id }}">delete</a>
				{% endif %}
				<a class="semitransparent" href="/post/{{ post.id }}">{{ post.id }}</a>
			</span>
		</div>
	</div>
	<hr>
	{% endfor %}

</div>

{% endblock %}